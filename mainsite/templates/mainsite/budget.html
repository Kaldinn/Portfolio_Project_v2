<!-- <!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% load bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}

    <title>Budget</title>
</head>


<body>
  <div class="container text-center">
    <div class="display-4">Budget Calculator</div>
  </div>
  <div class="container mt-4 text-center">
    <form method="POST" action="">
      {% csrf_token %}
      <div class="row mb-3">
        <div class="col">
          <label for="input_title" class="form-label">Dodaj Produkt:</label>
          <input type="text" class="form-control" id="input_title" name="title" required>
        </div>
        <div class="col">
          <label for="select_type" class="form-label">Typ:</label>
          <select class="form-select" id="select_type" name="type" required>
            <option value="usluga">Usługa</option>
            <option value="material">Materiał</option>
          </select>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col">
          <label for="select_invoice" class="form-label">Faktura:</label>
          <select class="form-select" id="select_invoice" name="invoice" required>
            <option value="faktura">Faktura</option>
            <option value="brak">Brak</option>
          </select>
        </div>
        <div class="col">
          <label for="select_tax" class="form-label">Podatek (%):</label>
          <select class="form-select" id="select_tax" name="tax" required>
            <option value="8">8%</option>
            <option value="23">23%</option>
          </select>
        </div>
        <div class="col">
          <label for="input_price" class="form-label">Cena:</label>
          <input type="number" class="form-control" id="input_price" name="price" required>
        </div>
      </div>
      <button class="btn btn-warning  btn-lg float-end ms-2 edit-button">Edytuj</button>
      <button type="submit" class="btn btn-success  btn-lg float-end me-2">Dodaj</button>
    </form>
  </div>
  

<div class="container mt-4">
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Tytuł</th>
        <th scope="col">Typ</th>
        <th scope="col">Podatek</th>
        <th scope="col">Cena</th>
      </tr>
    </thead>
    <tbody>

      {% for budget_item in budget_items %}
        <tr>
          <td>{{ budget_item.title }}</td>
          <td>{{ budget_item.get_type_display }}</td>
          <td>{{ budget_item.tax }}%</td>
          <td>{{ budget_item.price }}</td>
          <td>
            <form method="POST" action="">
              {% csrf_token %}
              <button class="float-end btn btn-danger btn-sm delete-button" type="submit">X</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      <tr>
        <td colspan="3"></td>
        <td></td>
      </tr>
      <tr>
        <td colspan="3"><h5>Suma: </h5></td>
        <td class="text-end"><h5>{{ total_sum }} zł</h5></td>
      </tr>
    </tbody>
  </table>
</div>

  <script>
    const form = document.querySelector('form');
    form.addEventListener('submit', () => {
      const inputPrice = document.querySelector('#input_price');
      const sumElement = document.querySelector('#sum');
      const price = parseFloat(inputPrice.value);
      const currentSum = parseFloat(sumElement.textContent);
      const newSum = currentSum + price;
      sumElement.textContent = newSum.toFixed(2);
    });

    const editButton = document.querySelector('.edit-button');
    const deleteButtons = document.querySelectorAll('.delete-button');

    editButton.addEventListener('click', () => {
      deleteButtons.forEach(button => {
        button.classList.remove("d-none");
  });
});

    document.addEventListener('click', (event) => {
      const clickedElement = event.target;
      if (!clickedElement.classList.contains('edit-button') && !clickedElement.parentElement.classList.contains('edit-button') && !clickedElement.classList.contains('delete-button')) {
        deleteButtons.forEach(button => {
          button.classList.add("d-none");
    });
  }
});

  editButton.addEventListener('click', (event) => {
    event.preventDefault();
  });


  </script>

</body>
</html>  -->